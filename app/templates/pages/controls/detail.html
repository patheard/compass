{% extends "base.html" %}

{% block content %}
<gcds-heading tag="h1">{{ control.nist_control_id }}</gcds-heading>
<gcds-heading tag="h2">{{ control.control_title | markdown_no_tags }}</gcds-heading>
<gcds-text>
    {{ control.control_description | markdown }}
</gcds-text>

<ul class="list-disc mt-600" class="sm">
    <li>
        <strong>{{ _('Status:') }}</strong>
        {{ _(control.implementation_status) }}
    </li>
    <li>
        <strong>{{ _('Assessment:') }}</strong>
        <gcds-link href="/assessments/{{ assessment.assessment_id }}">{{ assessment.product_name }}</gcds-link>
    </li>
</ul>

<gcds-button href="/assessments/{{ assessment.assessment_id }}/controls/{{ control.control_id }}/edit" type="link" button-role="primary" class="mt-800">
    {{ _("Edit") }}
</gcds-button>
<gcds-button href="/assessments/{{ assessment.assessment_id }}/controls/{{ control.control_id }}/delete" type="link" button-role="secondary" data-csrf-token="{{ csrf_token }}" class="delete-item">
    {{ _("Delete") }}
</gcds-button>

<hr class="mt-1000 mb-600">

<gcds-heading tag="h2">{{ _("Evidence") }}{% if evidences %}: {{ evidences|length }}{% endif %}</gcds-heading>

{% if evidences %}
<section class="table-container mb-300">
    <table>
        <thead>
            <tr>
                <th>{{ _('Title') }}</th>
                <th>{{ _('Description') }}</th>
                <th>{{ _('Type') }}</th>
                <th>{{ _('Actions') }}</th>
            </tr>
        </thead>
        <tbody>
            {% for evidence in evidences %}
                <tr>
                    <td>
                        <gcds-link href="/assessments/{{ assessment.assessment_id }}/controls/{{ control.control_id }}/evidence/{{ evidence.evidence_id }}">{{ evidence.title | markdown_no_tags | truncate(100) }}</gcds-link>
                    </td>
                    <td>{{ evidence.description | markdown_no_tags | truncate(100) }}</td>
                    <td>{{ _(evidence.evidence_type) }}</td>
                    <td class="nowrap actions">
                        <gcds-link href="/assessments/{{ assessment.assessment_id }}/controls/{{ control.control_id }}/evidence/{{ evidence.evidence_id }}/edit"><img src="/static/img/edit.svg" title="{{ _('Edit') }}" alt="{{ _('Edit') }}"></gcds-link>
                        <gcds-link href="/assessments/{{ assessment.assessment_id }}/controls/{{ control.control_id }}/evidence/{{ evidence.evidence_id }}/delete" data-csrf-token="{{ csrf_token }}" class="delete-item"><img src="/static/img/delete.svg" title="{{ _('Delete') }}" alt="{{ _('Delete') }}"></gcds-link>
                    </td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
</section>

<gcds-button href="/assessments/{{ assessment.assessment_id }}/controls/{{ control.control_id }}/evidence/new" type="link" class="mt-300">
    {{ _("Add") }}
</gcds-button>
{% else %}
<gcds-notice type="info" notice-title-tag="h2" notice-title="Nothing found">
  <gcds-text>
    <gcds-link href="/assessments/{{ assessment.assessment_id }}/controls/{{ control.control_id }}/evidence/new">{{ _('Add evidence') }}</gcds-link>
  </gcds-text>
</gcds-notice>
{% endif %}



{% endblock %}