{% extends "base.html" %}

{% block content %}
<gcds-heading tag="h1">{{ evidence.title }}</gcds-heading>
<gcds-text>
    {{ evidence.description }}
</gcds-text>

<ul class="list-disc mb-300" class="sm">
    <li>
        <strong>{{ _('Type:') }}</strong>
        {{ _(evidence.evidence_type) }}
    </li>
{% if evidence.is_automated_collection %}
{% if job_template %}
    <li>
        <strong>{{ _('Job name:') }}</strong>
        <gcds-link href="/job-templates/{{ job_template.template_id }}">{{ job_template.name }} ({{ job_template.scan_type }})</gcds-link>
    </li>
    <li>
        <strong>{{ _('Description:') }}</strong>
        {{ job_template.description }}
    </li>
    <li>
        <strong>{{ _('AWS Account ID:') }}</strong>
        {{ evidence.aws_account_id }}
    </li>
{% endif %}
{% endif %}
</ul>



{% if evidence.is_automated_collection %}
{% if job_executions %}
<table>
    <thead>
        <tr>
            <th scope="col">{{ _('Status') }}</th>
            <th scope="col">{{ _('Started At') }}</th>
            <th scope="col">{{ _('Completed At') }}</th>
            <th scope="col">{{ _('Retry Count') }}</th>
        </tr>
    </thead>
    <tbody>
        {% for execution in job_executions %}
        <tr>
            <td>{{ execution.status }}</td>
            <td>{{ execution.started_at or '-' }}</td>
            <td>{{ execution.completed_at or '-' }}</td>
            <td>{{ execution.retry_count }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endif %}
{% endif %}

<gcds-button href="/assessments/{{ assessment.assessment_id }}/controls/{{ control.control_id }}/evidence/{{ evidence.evidence_id }}/edit" type="link" button-role="primary" class="mt-300">
    {{ _("Edit") }}
</gcds-button>
<gcds-button href="/assessments/{{ assessment.assessment_id }}/controls/{{ control.control_id }}/evidence/{{ evidence.evidence_id }}/delete" type="link" button-role="secondary" data-csrf-token="{{ csrf_token }}" class="delete-item">
    {{ _("Delete") }}
</gcds-button>



{% endblock %}